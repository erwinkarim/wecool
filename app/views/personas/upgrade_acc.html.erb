<% @focus = 'Buy Storage' %>
<%= render "common/personaHeaderBar" %>

<div class="page-header">
  <h2>
    <% if persona_signed_in? && current_persona == @persona then %>
      <%= current_persona.premium? ? 'Extend Your Premium Account' : 'Upgrade to Premium Account' %>
    <% else %>
      <%= @persona.premium? ? 
        'Extend Premium Account for '+ @persona.screen_name : 
        'Give ' + @persona.screen_name + ' Premium Membership' %>
    <% end %>
  </h2>
</div>

<div class="row-fluid">
  <div class="span8 offset2">
    <h3>Select Your Storage Plan</h2>  
    <table class="table table-bordered table-hover">
      <thead>
        <tr>
          <th>Package</th>
          <th>Storage</th>
          <th>Monthly Rates</th>
          <th>Yearly Rates</th>
        </tr>
      </thead>
      <tbody>
				<tr>
					<th>Free</th>
					<td>5 GB</td>
					<td style="text-align:center;" colspan="2">Free</td>
				</tr>
				<tr>
					<th>Nano</th>
					<td>25 GB</td>
					<td>$4.00</td>
					<td>$40.00</td>
				</tr>
				<tr>
					<th>Small</th>
					<td>100 GB</td>
					<td>$15.00</td>
					<td>$150.00</td>
				</tr>
				<tr>
					<th>Large</th>
					<td>400 GB</td>
					<td>$60.00</td>
					<td>$600.00</td>
				</tr>
				<tr>
					<th>Monster</th>
					<td>800 GB</td>
					<td>$120.00</td>
					<td>$1,200.00</td>
				</tr>
      </tbody>
    </table>
      </tbody>
    </table>
  </div>
</div>

<div class="row-fluid">
  <div class="span8 offset2">
    <h3>Upgrade Now!!</h3>
    <%= form_tag store_add_to_cart_path(@persona.screen_name), :class=>'form-horizontal', :id => 'buy_premium_form', :remote => true do -%>
      <legend>Purchase upgrade options...</legend>  
      <div class="control-group">
        <%= label_tag 'duration', 
          select_tag( 'sku_code', options_from_collection_for_select(Sku.where(:id => 3..14), 'code', 'description') ),
          :class=> 'controls' 
        %>
      </div> 
      <div class="form-actions">
				<div id="suggest-purchase">
					<%= link_to 'No Thanks', root_path , :class=> 'btn' %>
					<%= button_tag 'Upgrade Now', :class => 'btn btn-primary', :type => 'submit', 
						:id => 'purchase_premium_btn', :'data-loading-text' => 'Adding to cart...' %>
				</div>
				<div id="purchased-thanks" style="display:none">
					<span>Thanks!, you can 
						<%= link_to 'checkout', store_checkout_path(@persona.screen_name), :class => 'btn btn primary' %> to activate your premium account </span>
				</div>
      </div>
			
    <% end -%>
  </div>
</div>

<div class="row-fluid">
  <div class="span8 offset2">
    <%= form_tag store_redeem_coupon_path(@persona.screen_name), :class=>'form-horizontal' do -%>
      <legend>...or key in your redeem codes</legend>
      <div class="control-group">
        <%= text_field_tag 'redeemCodes', nil, :placeholder => 'Key in your redeem codes', 
          :class => 'controls input-xlarge' %>
      </div>
      <div class="form-actions">
        <%= link_to 'No Thanks', root_path , :class=> 'btn' %>
        <%= button_tag 'Redeem Now', :class => 'btn btn-primary', :type => 'submit' %>
      </div>
    <% end -%>
  </div>
</div>

<div class="row-fluid">
  <div class="span8 offset2">
    <h3>Fine Print</h3>
    <ul>
      <li>1GB = 1,000,000 bytes</li>
      <li>1 year is 1 calander year</li>
      <li>Multiple coupons can be purchased and redeem at the same time for additional storage</li>
      <li>Size is calculated from sizes of original files only</li>
			<li>When your additional storage purchase expires, the last 5GB of photos will be displayed. 
				Photos that are outside the free area will be kept at least 1 year in case you want to purchase more storage again</li>
      <li>We have the right to limit excessive use</li>
    </ul>
  </div>
</div>
