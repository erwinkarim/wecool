<%= form_for @mediaset, :html => { :class => 'form-horizontal' } do |f| %>
  <div class="row-fluid">
    <div class="span5">
      <h3>Add title and description...</h3>
      <div class="control-group">
        <%= f.label :title, :class => 'control-label' %>
        <div class="controls">
          <%= f.text_field :title, :class => 'text_field' %>
        </div>
      </div>
      <div class="control-group">
        <%= f.label :description, :class => 'control-label' %>
        <div class="controls">
          <%= f.text_area :description, :class => 'text_area', :cols => 80, :rows=>5 %>
        </div>
      </div>
    </div>
    <div class="span7">
        <h3>...then drop & arrange your photos here...</h3>
        <div class="well">
          <% @mediaset.photos.each do |photo| %>
            <%= image_tag photo.avatar.square100, :style => 'margin:4px;', :class=> 'img-polaroid selected-img ui-widget-content' %>
          <% end %>
        </div>
    </div>
  </div>

  <div class="row-fluid" id="piclist">
      <h3>...from this list of your photos</h3>
      <div class="row-fluid">
        <select name="photo-list">
          <option selected>Photos not in this mediaset</option>
          <option>All Photos</option>
        </select>
      </div>
      <br />
      <div class="control-group row-fluid" style="display: block; overflow-x: scroll; white-space: nowrap; height: 130px; ">
        <% @photos.each do |photo| %>
          <% if @mediaset_photos.include?(photo) then %>
            <%= check_box_tag 'photo[]', photo.id, true,  
              :id => 'photo_'+photo.id.to_s, :style => 'display: none'  %>
            <%= image_tag photo.avatar.square100.url, :id => photo.id, :class => 'checked img-polaroid', 
              :style => 'padding:0px; border:5px solid red;' %>
          <% else %>
            <%= check_box_tag 'photo[]', photo.id, false,  :id => 'photo_'+photo.id.to_s, 
              :style => 'display: none'  %>
            <%= image_tag photo.avatar.square100.url, :id => photo.id , :class => 'img-polaroid'%>
          <% end %>
        <% end %>
      </div>
  </div>

  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                mediasets_path, :class => 'btn' %>
  </div>
<% end %>


<script type="text/javascript">
  $(document).ready(function (){
    $("#piclist img").click(function (event){
      $(this).toggleClass("checked");
      if($(this).hasClass("checked")){
        $("#photo_"+ $(this).attr('id') ).prop('checked', true);
        $(this).css('padding', '0px');
        $(this).css('border', '5px solid red');
      } else {
        $("#photo_"+ $(this).attr('id') ).prop('checked', false);
        $(this).css('padding', '4px');
        $(this).css('border', '1px solid rgba(0, 0 ,0, 0.2)');
      }
       
      $('.selected-img').draggable(); 
    });
  });
</script>
